<!doctype html><html lang=en-us>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Part IV: ConfigMgr - Prerequisites & Site Installation">
<meta name=twitter:image content="https://ajf8729.com/icon.png">
<body class=not-ready data-menu=true>
<header class=header>
<p class=logo>
<a class=site-name href=https://ajf8729.com/>AJF8729</a><a class=btn-dark></a>
</p>
<script>let bodyClx=document.body.classList,btnDark=document.querySelector('.btn-dark'),sysDark=window.matchMedia('(prefers-color-scheme: dark)'),darkVal=localStorage.getItem('dark'),setDark=a=>{bodyClx[a?'add':'remove']('dark'),localStorage.setItem('dark',a?'yes':'no')};setDark(darkVal?darkVal==='yes':sysDark.matches),requestAnimationFrame(()=>bodyClx.remove('not-ready')),btnDark.addEventListener('click',()=>setDark(!bodyClx.contains('dark'))),sysDark.addEventListener('change',a=>setDark(a.matches))</script>
<nav class=menu>
<a href=/about/>About</a>
<a href=/resume/>Resume</a>
<a href=/lab-configuration/>Lab Configuration</a>
</nav>
<nav class=social>
<a class=twitter style=--url:url(./twitter.svg) href=https://twitter.com/ajf8729 target=_blank></a>
<a class=github style=--url:url(./github.svg) href=https://github.com/ajf8729 target=_blank></a>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-title>
<aside>
<time>August 29, 2021</time>
</aside>
<h1>Part IV: ConfigMgr - Prerequisites & Site Installation</h1>
</header>
<section class=post-content><ol>
<li>Create NO_SMS_ON_DRIVE.SMS files
<ul>
<li><code>New-Item -Path 'C:\' -Name "NO_SMS_ON_DRIVE.SMS" -ItemType File | Out-Null</code></li>
<li><code>New-Item -Path 'E:\' -Name "NO_SMS_ON_DRIVE.SMS" -ItemType File | Out-Null</code></li>
</ul>
</li>
<li>Install Windows features for Primary Site, Management Point, Distribution Point, State Migration Point, and Software Update Point roles
<ul>
<li><a href=https://github.com/ajf8729/Lab/blob/main/WindowsFeatures.txt>https://github.com/ajf8729/Lab/blob/main/WindowsFeatures.txt</a></li>
<li><code>Install-WindowsFeature -Name (Get-Content -Path "WindowsFeatures.txt")</code></li>
</ul>
</li>
<li>Extend AD schema
<ul>
<li>Copy <code>ConfigMgr_ad_schema.ldf</code> to DC</li>
<li>Edit <code>ConfigMgr_ad_schema.ldf</code>
<ul>
<li>Find/Replace all <code>DC=x</code> with <code>DC=lab,DC=ajf8729,DC=com</code></li>
</ul>
</li>
<li><code>ldifde.exe -i -f ConfigMgr_ad_schema.ldf -v</code></li>
</ul>
</li>
<li>WSUS Postinstall
<ul>
<li><code>wsusutil.exe postinstall SQL_INSTANCE_NAME="labcm01.lab.ajf8729.com" CONTENT_DIR="F:\WSUS"</code></li>
</ul>
</li>
<li>Install Windows ADK
<ul>
<li><code>adksetup.exe /features OptionId.DeploymentTools OptionId.ImagingAndConfigurationDesigner OptionId.ICDConfigurationDesigner OptionId.UserStateMigrationTool /ceip on</code></li>
<li><code>adkwinpesetup.exe /features OptionId.WindowsPreinstallationEnvironment /ceip on</code></li>
</ul>
</li>
<li>Download updated setup files
<ul>
<li><code>\Configmgr_TechPreview2106\SMSSETUP\BIN\X64\setupdl.exe "F:\SOURCE\Downloads"</code></li>
</ul>
</li>
<li>Install ConfigMgr primary site
<ul>
<li><code>setup.exe /script ConfigMgr.ini</code></li>
</ul>
</li>
<li>Restart LABCM01</li>
<li>Install latest site update (2107 as of 2021-08-30)
<ul>
<li><code>Import-Module -FullyQualifiedName "$($ENV:SMS_ADMIN_UI_PATH)\..\ConfigurationManager.psd1"</code></li>
<li><code>Set-Location -Path "LAB:"</code></li>
<li><code>Invoke-CMSiteUpdatePrerequisiteCheck -Name "Configuration Manager Technical Preview 2107" -Verbose</code></li>
<li><code>Install-CMSiteUpdate -Name "Configuration Manager Technical Preview 2107" -Force -Verbose</code></li>
</ul>
</li>
</ol>
</section>
<nav class=post-nav>
<a class=prev href=https://ajf8729.com/post/part-v-cm-config/><span>←</span><span>Part V: ConfigMgr - Configuration</span></a>
<a class=next href=https://ajf8729.com/post/part-iii-cm-sql/><span>Part III: ConfigMgr - SQL Installation</span><span>→</span></a>
</nav>
</article>
</main>
<footer class=footer>
<p>&copy; 2021 <a href=https://ajf8729.com/>AJF8729</a></p>
<p>Powered by <a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>️</p>
<p>
<a href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>Paper 5.0</a>
</p>
</footer>
</body>
</html>