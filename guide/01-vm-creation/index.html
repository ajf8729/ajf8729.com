<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=twitter:card content="summary"><meta name=twitter:title content="Part 01: VM Creation & Initial Configuration"><meta name=twitter:description content="VM Creation & Initial Configuration"><meta name=twitter:image content="https://ajf8729.com/icon.png"><title>Part 01: VM Creation & Initial Configuration - AJF8729</title><meta name=description content="Create VMs https://github.com/ajf8729/Lab/blob/main/NewLabVM.ps1 # Example syntax to create a VM using NewLabVM.ps1 # Run from host running Hyper-V $Parameters = @{ LabName = LAB01 VMHostname = LAB01DC01A MemoryStartupMB = 1024 MemoryMaximumMB = 2048 ProcessorCount = 2 VirtualSwitchName = INTERNAL DiskCount = 1 VHDPath = 'D:\Virtual Hard Disks\' VHDSizeGB = 100 ISOPath = 'D:\Software\20348.169.210806-2348.fe_release_svc_refresh_SERVER_EVAL_x64FRE_en-us.iso' Verbose = $true } .\NewLabVM.ps1 @Parameters Power on VMs and install OS Set Administrator password This password will be used for further automation I tend to use New-Guid to generate a &ldquo;random&rdquo; password Configure VMs https://github."><meta name=author content><link rel="preload stylesheet" as=style href=https://ajf8729.com/app.min.css><link rel=preload as=image href=https://ajf8729.com/theme.png><link rel=preload as=image href=https://ajf8729.com/twitter.svg><link rel=preload as=image href=https://ajf8729.com/github.svg><link rel=icon href=https://ajf8729.com/favicon.ico><link rel=apple-touch-icon href=https://ajf8729.com/apple-touch-icon.png><meta name=generator content="Hugo 0.100.2"><meta property="og:title" content="Part 01: VM Creation & Initial Configuration"><meta property="og:description" content="VM Creation & Initial Configuration"><meta property="og:type" content="article"><meta property="og:url" content="https://ajf8729.com/guide/01-vm-creation/"><meta property="article:section" content="guide"><meta property="article:published_time" content="2022-02-07T17:00:00+00:00"><meta property="article:modified_time" content="2022-02-07T17:00:00+00:00"><meta itemprop=name content="Part 01: VM Creation & Initial Configuration"><meta itemprop=description content="VM Creation & Initial Configuration"><meta itemprop=datePublished content="2022-02-07T17:00:00+00:00"><meta itemprop=dateModified content="2022-02-07T17:00:00+00:00"><meta itemprop=wordCount content="142"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Part 01: VM Creation & Initial Configuration"><meta name=twitter:description content="VM Creation & Initial Configuration"></head><body class=not-ready data-menu=true><header class=header><p class=logo><a class=site-name href=https://ajf8729.com/>AJF8729</a><a class=btn-dark></a></p><script>let bodyClx=document.body.classList,btnDark=document.querySelector('.btn-dark'),sysDark=window.matchMedia('(prefers-color-scheme: dark)'),darkVal=localStorage.getItem('dark'),setDark=e=>{bodyClx[e?'add':'remove']('dark'),localStorage.setItem('dark',e?'yes':'no')};setDark(darkVal?darkVal==='yes':sysDark.matches),requestAnimationFrame(()=>bodyClx.remove('not-ready')),btnDark.addEventListener('click',()=>setDark(!bodyClx.contains('dark'))),sysDark.addEventListener('change',e=>setDark(e.matches))</script><nav class=menu><a href=/about/>About</a>
<a href=/resume/>Resume</a>
<a href=/post/>Posts</a>
<a href=/guide/>Guides</a>
<a href=/certificate-authorities/>Certificate Authorities</a></nav><nav class=social><a class=twitter style=--url:url(./twitter.svg) href=https://twitter.com/ajf8729 target=_blank></a>
<a class=github style=--url:url(./github.svg) href=https://github.com/ajf8729 target=_blank></a></nav></header><main class=main><article class=post-single><header class=post-title><p><time>Feb 7, 2022</time></p><h1>Part 01: VM Creation & Initial Configuration</h1></header><section class=post-content><ol><li>Create VMs<ul><li><a href=https://github.com/ajf8729/Lab/blob/main/NewLabVM.ps1>https://github.com/ajf8729/Lab/blob/main/NewLabVM.ps1</a></li></ul></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ps data-lang=ps><span style=display:flex><span><span style=color:#a6e22e>#</span> <span style=color:#a6e22e>Example</span> <span style=color:#a6e22e>syntax</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>create</span> <span style=color:#a6e22e>a</span> <span style=color:#a6e22e>VM</span> <span style=color:#a6e22e>using</span> <span style=color:#a6e22e>NewLabVM.ps1</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>#</span> <span style=color:#a6e22e>Run</span> <span style=color:#a6e22e>from</span> <span style=color:#a6e22e>host</span> <span style=color:#a6e22e>running</span> <span style=color:#a6e22e>Hyper-V</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$Parameters</span> <span style=color:#a6e22e>=</span> <span style=color:#a6e22e>@</span>{
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LabName</span>           <span style=color:#a6e22e>=</span> <span style=color:#a6e22e>LAB01</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>VMHostname</span>        <span style=color:#a6e22e>=</span> <span style=color:#a6e22e>LAB01DC01A</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MemoryStartupMB</span>   <span style=color:#a6e22e>=</span> <span style=color:#ae81ff>1024</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>MemoryMaximumMB</span>   <span style=color:#a6e22e>=</span> <span style=color:#ae81ff>2048</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ProcessorCount</span>    <span style=color:#a6e22e>=</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>VirtualSwitchName</span> <span style=color:#a6e22e>=</span> <span style=color:#a6e22e>INTERNAL</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>DiskCount</span>         <span style=color:#a6e22e>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>VHDPath</span>           <span style=color:#a6e22e>=</span> <span style=color:#a6e22e>&#39;D:\Virtual</span> <span style=color:#a6e22e>Hard</span> <span style=color:#a6e22e>Disks\&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>VHDSizeGB</span>         <span style=color:#a6e22e>=</span> <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ISOPath</span>           <span style=color:#a6e22e>=</span> <span style=color:#a6e22e>&#39;D:\Software\20348.169.210806-2348.fe_release_svc_refresh_SERVER_EVAL_x64FRE_en-us.iso&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Verbose</span>           <span style=color:#a6e22e>=</span> <span style=color:#a6e22e>$true</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>.\NewLabVM.ps1</span> <span style=color:#a6e22e>@Parameters</span>
</span></span></code></pre></div><ol start=2><li>Power on VMs and install OS</li><li>Set Administrator password<ul><li>This password will be used for further automation</li><li>I tend to use <code>New-Guid</code> to generate a &ldquo;random&rdquo; password</li></ul></li><li>Configure VMs<ul><li><a href=https://github.com/ajf8729/Lab/blob/main/ConfigureLabVM.ps1>https://github.com/ajf8729/Lab/blob/main/ConfigureLabVM.ps1</a></li></ul></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ps data-lang=ps><span style=display:flex><span><span style=color:#a6e22e>#</span> <span style=color:#a6e22e>Example</span> <span style=color:#a6e22e>syntax</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>configure</span> <span style=color:#a6e22e>a</span> <span style=color:#a6e22e>VM</span> <span style=color:#a6e22e>using</span> <span style=color:#a6e22e>ConfigureLabVM.ps1</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>#</span> <span style=color:#a6e22e>Run</span> <span style=color:#a6e22e>from</span> <span style=color:#a6e22e>host</span> <span style=color:#a6e22e>running</span> <span style=color:#a6e22e>Hyper-V</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$Parameters</span> <span style=color:#a6e22e>=</span> <span style=color:#a6e22e>@</span>{
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LabName</span>        <span style=color:#a6e22e>=</span> <span style=color:#a6e22e>LAB01</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>VMHostname</span>     <span style=color:#a6e22e>=</span> <span style=color:#a6e22e>LAB01DC01A</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Username</span>       <span style=color:#a6e22e>=</span> <span style=color:#a6e22e>Administrator</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Password</span>       <span style=color:#a6e22e>=</span> <span style=color:#a6e22e>&#39;bf1456b8-a91f-4a41-92a8-8388ff07dd6d&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>IPAddress</span>      <span style=color:#a6e22e>=</span> <span style=color:#a6e22e>192.168.1.11</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>PrefixLength</span>   <span style=color:#a6e22e>=</span> <span style=color:#ae81ff>24</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>DefaultGateway</span> <span style=color:#a6e22e>=</span> <span style=color:#a6e22e>192.168.1.1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>DNSServer</span>      <span style=color:#a6e22e>=</span> <span style=color:#a6e22e>192.168.1.1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>TimeZoneID</span>     <span style=color:#a6e22e>=</span> <span style=color:#a6e22e>&#39;Eastern</span> <span style=color:#a6e22e>Standard</span> <span style=color:#a6e22e>Time&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Verbose</span>        <span style=color:#a6e22e>=</span> <span style=color:#a6e22e>$true</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>.\ConfigureLabVM.ps1</span> <span style=color:#a6e22e>@Parameters</span>
</span></span></code></pre></div></section><nav class=post-nav><a class=next href=https://ajf8729.com/guide/02-adds-installation-configuration/><span>Part 02: Active Directory Domain Services - Installation and Configuration</span><span>→</span></a></nav></article></main><footer class=footer><p>&copy; 2022 <a href=https://ajf8729.com/>AJF8729</a></p><p>Powered by <a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>️</p><p><a href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>Paper 5.1</a></p></footer></body></html>