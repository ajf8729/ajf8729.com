<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="ConfigMgr - Prerequisites and Site Installation">
<meta name=twitter:image content="https://ajf8729.com/icon.png">
<title>ConfigMgr - Prerequisites and Site Installation - AJF8729</title>
<meta name=description content="Create NO_SMS_ON_DRIVE.SMS files  New-Item -Path 'C:\' -Name &#34;NO_SMS_ON_DRIVE.SMS&#34; -ItemType File | Out-Null New-Item -Path 'E:\' -Name &#34;NO_SMS_ON_DRIVE.SMS&#34; -ItemType File | Out-Null   Install Windows features for Primary Site, Management Point, Distribution Point, State Migration Point, and Software Update Point roles  https://github.com/ajf8729/Lab/blob/main/WindowsFeatures.txt Install-WindowsFeature -Name (Get-Content -Path &#34;WindowsFeatures.txt&#34;)   Extend AD schema  Copy ConfigMgr_ad_schema.ldf to DC Edit ConfigMgr_ad_schema.ldf  Find/Replace all DC=x with DC=lab,DC=dev,DC=ajf8729,DC=com   ldifde.">
<meta name=author content>
<link rel="preload stylesheet" as=style href=https://ajf8729.com/app.min.css>
<link rel="preload stylesheet" as=style href=https://ajf8729.com/an-old-hope.min.css>
<script defer src=https://ajf8729.com/highlight.min.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=preload as=image href=https://ajf8729.com/theme.png>
<link rel=preload as=image href=https://ajf8729.com/twitter.svg>
<link rel=preload as=image href=https://ajf8729.com/github.svg>
<link rel=icon href=https://ajf8729.com/favicon.ico>
<link rel=apple-touch-icon href=https://ajf8729.com/apple-touch-icon.png>
<meta name=generator content="Hugo 0.89.0">
<meta property="og:title" content="ConfigMgr - Prerequisites and Site Installation">
<meta property="og:description" content="Create NO_SMS_ON_DRIVE.SMS files  New-Item -Path 'C:\' -Name &#34;NO_SMS_ON_DRIVE.SMS&#34; -ItemType File | Out-Null New-Item -Path 'E:\' -Name &#34;NO_SMS_ON_DRIVE.SMS&#34; -ItemType File | Out-Null   Install Windows features for Primary Site, Management Point, Distribution Point, State Migration Point, and Software Update Point roles  https://github.com/ajf8729/Lab/blob/main/WindowsFeatures.txt Install-WindowsFeature -Name (Get-Content -Path &#34;WindowsFeatures.txt&#34;)   Extend AD schema  Copy ConfigMgr_ad_schema.ldf to DC Edit ConfigMgr_ad_schema.ldf  Find/Replace all DC=x with DC=lab,DC=dev,DC=ajf8729,DC=com   ldifde.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ajf8729.com/guide/configmgr-prerequisites-site-installation/"><meta property="article:section" content="guide">
<meta itemprop=name content="ConfigMgr - Prerequisites and Site Installation">
<meta itemprop=description content="Create NO_SMS_ON_DRIVE.SMS files  New-Item -Path 'C:\' -Name &#34;NO_SMS_ON_DRIVE.SMS&#34; -ItemType File | Out-Null New-Item -Path 'E:\' -Name &#34;NO_SMS_ON_DRIVE.SMS&#34; -ItemType File | Out-Null   Install Windows features for Primary Site, Management Point, Distribution Point, State Migration Point, and Software Update Point roles  https://github.com/ajf8729/Lab/blob/main/WindowsFeatures.txt Install-WindowsFeature -Name (Get-Content -Path &#34;WindowsFeatures.txt&#34;)   Extend AD schema  Copy ConfigMgr_ad_schema.ldf to DC Edit ConfigMgr_ad_schema.ldf  Find/Replace all DC=x with DC=lab,DC=dev,DC=ajf8729,DC=com   ldifde.">
<meta itemprop=wordCount content="133">
<meta itemprop=keywords content>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="ConfigMgr - Prerequisites and Site Installation">
<meta name=twitter:description content="Create NO_SMS_ON_DRIVE.SMS files  New-Item -Path 'C:\' -Name &#34;NO_SMS_ON_DRIVE.SMS&#34; -ItemType File | Out-Null New-Item -Path 'E:\' -Name &#34;NO_SMS_ON_DRIVE.SMS&#34; -ItemType File | Out-Null   Install Windows features for Primary Site, Management Point, Distribution Point, State Migration Point, and Software Update Point roles  https://github.com/ajf8729/Lab/blob/main/WindowsFeatures.txt Install-WindowsFeature -Name (Get-Content -Path &#34;WindowsFeatures.txt&#34;)   Extend AD schema  Copy ConfigMgr_ad_schema.ldf to DC Edit ConfigMgr_ad_schema.ldf  Find/Replace all DC=x with DC=lab,DC=dev,DC=ajf8729,DC=com   ldifde.">
</head>
<body class=not-ready data-menu=true>
<header class=header>
<p class=logo>
<a class=site-name href=https://ajf8729.com/>AJF8729</a><a class=btn-dark></a>
</p>
<script>let bodyClx=document.body.classList,btnDark=document.querySelector('.btn-dark'),sysDark=window.matchMedia('(prefers-color-scheme: dark)'),darkVal=localStorage.getItem('dark'),setDark=a=>{bodyClx[a?'add':'remove']('dark'),localStorage.setItem('dark',a?'yes':'no')};setDark(darkVal?darkVal==='yes':sysDark.matches),requestAnimationFrame(()=>bodyClx.remove('not-ready')),btnDark.addEventListener('click',()=>setDark(!bodyClx.contains('dark'))),sysDark.addEventListener('change',a=>setDark(a.matches))</script>
<nav class=menu>
<a href=/about/>About</a>
<a href=/resume/>Resume</a>
<a href=/post/>Posts</a>
<a href=/guide/>Guides</a>
<a href=/lab-configuration/>Lab Configuration</a>
</nav>
<nav class=social>
<a class=twitter style=--url:url(./twitter.svg) href=https://twitter.com/ajf8729 target=_blank></a>
<a class=github style=--url:url(./github.svg) href=https://github.com/ajf8729 target=_blank></a>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-title>
<aside>
<time>January 1, 0001</time>
</aside>
<h1>ConfigMgr - Prerequisites and Site Installation</h1>
</header>
<section class=post-content><ol>
<li>Create NO_SMS_ON_DRIVE.SMS files
<ul>
<li><code>New-Item -Path 'C:\' -Name "NO_SMS_ON_DRIVE.SMS" -ItemType File | Out-Null</code></li>
<li><code>New-Item -Path 'E:\' -Name "NO_SMS_ON_DRIVE.SMS" -ItemType File | Out-Null</code></li>
</ul>
</li>
<li>Install Windows features for Primary Site, Management Point, Distribution Point, State Migration Point, and Software Update Point roles
<ul>
<li><a href=https://github.com/ajf8729/Lab/blob/main/WindowsFeatures.txt>https://github.com/ajf8729/Lab/blob/main/WindowsFeatures.txt</a></li>
<li><code>Install-WindowsFeature -Name (Get-Content -Path "WindowsFeatures.txt")</code></li>
</ul>
</li>
<li>Extend AD schema
<ul>
<li>Copy <code>ConfigMgr_ad_schema.ldf</code> to DC</li>
<li>Edit <code>ConfigMgr_ad_schema.ldf</code>
<ul>
<li>Find/Replace all <code>DC=x</code> with <code>DC=lab,DC=dev,DC=ajf8729,DC=com</code></li>
</ul>
</li>
<li><code>ldifde.exe -i -f ConfigMgr_ad_schema.ldf -v</code></li>
</ul>
</li>
<li>WSUS Postinstall
<ul>
<li><code>wsusutil.exe postinstall SQL_INSTANCE_NAME="labcm01.lab.dev.ajf8729.com" CONTENT_DIR="F:\WSUS"</code></li>
</ul>
</li>
<li>Install Windows ADK
<ul>
<li><a href=https://github.com/ajf8729/Lab/blob/main/03b-ADK.ps1>https://github.com/ajf8729/Lab/blob/main/03b-ADK.ps1</a></li>
<li><code>adksetup.exe /features OptionId.DeploymentTools OptionId.ImagingAndConfigurationDesigner OptionId.ICDConfigurationDesigner OptionId.UserStateMigrationTool /ceip on</code></li>
<li><code>adkwinpesetup.exe /features OptionId.WindowsPreinstallationEnvironment /ceip on</code></li>
</ul>
</li>
<li>Download updated setup files
<ul>
<li><code>\Configmgr_TechPreview2110\SMSSETUP\BIN\X64\setupdl.exe "F:\SOURCE\Downloads"</code></li>
</ul>
</li>
<li>Install ConfigMgr primary site
<ul>
<li><code>setup.exe /script ConfigMgr.ini</code></li>
</ul>
</li>
<li>Restart LABCM01</li>
<li>Install latest site update (2111 as of 2021-11-01)
<ul>
<li><code>Import-Module -FullyQualifiedName "$($ENV:SMS_ADMIN_UI_PATH)\..\ConfigurationManager.psd1"</code></li>
<li><code>Set-Location -Path "LAB:"</code></li>
<li><code>Invoke-CMSiteUpdatePrerequisiteCheck -Name "Configuration Manager Technical Preview 2111" -Verbose</code></li>
<li><code>Install-CMSiteUpdate -Name "Configuration Manager Technical Preview 2111" -Force -Verbose</code></li>
</ul>
</li>
</ol>
</section>
<nav class=post-nav>
<a class=prev href=https://ajf8729.com/guide/configmgr-misc-roles/><span>←</span><span>ConfigMgr - Misc Roles</span></a>
<a class=next href=https://ajf8729.com/guide/configmgr-reporting-services-point/><span>ConfigMgr - Reporting Services Point</span><span>→</span></a>
</nav>
</article>
</main>
<footer class=footer>
<p>&copy; 2021 <a href=https://ajf8729.com/>AJF8729</a></p>
<p>Powered by <a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>️</p>
<p>
<a href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>Paper 5.0</a>
</p>
</footer>
</body>
</html>