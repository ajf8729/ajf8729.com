<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=twitter:card content="summary"><meta name=twitter:title content="Part 04: ConfigMgr - Prerequisites and Site Installation"><meta name=twitter:description content="ConfigMgr - Prerequisites and Site Installation"><meta name=twitter:image content="https://ajf8729.com/icon.png"><title>Part 04: ConfigMgr - Prerequisites and Site Installation - AJF8729</title><meta name=description content="Install Windows features https://github.com/ajf8729/Lab/blob/main/conf/WindowsFeatures.txt https://raw.githubusercontent.com/ajf8729/Lab/main/conf/WindowsFeatures.txt Install-WindowsFeature -Name (Get-Content -Path F:\SOURCE\WindowsFeatures.txt) -Verbose Extend AD schema https://github.com/ajf8729/Lab/blob/main/conf/ConfigMgr_ad_schema.ldf https://raw.githubusercontent.com/ajf8729/Lab/main/conf/ConfigMgr_ad_schema.ldf Save ConfigMgr_ad_schema.ldf to DC and edit it Find/Replace all DC=x with DC=ad,DC=domain,DC=com (substitute your domain DC) ldifde.exe -i -f ConfigMgr_ad_schema.ldf -v WSUS Postinstall &#34;C:\Program Files\Update Services\Tools\WsusUtil.exe&#34; postinstall SQL_INSTANCE_NAME=&#34;configmgr.ad.domain.tld&#34; CONTENT_DIR=&#34;F:\WSUS&#34; (replace configmgr.ad.domain.tld with the FQDN of you ConfigMgr server) Install Windows 11 ADK adksetup.exe /features OptionId.DeploymentTools OptionId.ImagingAndConfigurationDesigner OptionId.ICDConfigurationDesigner OptionId.UserStateMigrationTool /ceip on /quiet adkwinpesetup.exe /features OptionId."><meta name=author content><link rel="preload stylesheet" as=style href=https://ajf8729.com/app.min.css><link rel=preload as=image href=https://ajf8729.com/theme.png><link rel=preload as=image href=https://ajf8729.com/twitter.svg><link rel=preload as=image href=https://ajf8729.com/github.svg><link rel=icon href=https://ajf8729.com/favicon.ico><link rel=apple-touch-icon href=https://ajf8729.com/apple-touch-icon.png><meta name=generator content="Hugo 0.100.2"><meta property="og:title" content="Part 04: ConfigMgr - Prerequisites and Site Installation"><meta property="og:description" content="ConfigMgr - Prerequisites and Site Installation"><meta property="og:type" content="article"><meta property="og:url" content="https://ajf8729.com/guide/04-configmgr-prerequisites-site-installation/"><meta property="article:section" content="guide"><meta property="article:published_time" content="2022-02-07T17:00:00+00:00"><meta property="article:modified_time" content="2022-02-07T17:00:00+00:00"><meta itemprop=name content="Part 04: ConfigMgr - Prerequisites and Site Installation"><meta itemprop=description content="ConfigMgr - Prerequisites and Site Installation"><meta itemprop=datePublished content="2022-02-07T17:00:00+00:00"><meta itemprop=dateModified content="2022-02-07T17:00:00+00:00"><meta itemprop=wordCount content="106"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Part 04: ConfigMgr - Prerequisites and Site Installation"><meta name=twitter:description content="ConfigMgr - Prerequisites and Site Installation"></head><body class=not-ready data-menu=true><header class=header><p class=logo><a class=site-name href=https://ajf8729.com/>AJF8729</a><a class=btn-dark></a></p><script>let bodyClx=document.body.classList,btnDark=document.querySelector('.btn-dark'),sysDark=window.matchMedia('(prefers-color-scheme: dark)'),darkVal=localStorage.getItem('dark'),setDark=e=>{bodyClx[e?'add':'remove']('dark'),localStorage.setItem('dark',e?'yes':'no')};setDark(darkVal?darkVal==='yes':sysDark.matches),requestAnimationFrame(()=>bodyClx.remove('not-ready')),btnDark.addEventListener('click',()=>setDark(!bodyClx.contains('dark'))),sysDark.addEventListener('change',e=>setDark(e.matches))</script><nav class=menu><a href=/about/>About</a>
<a href=/resume/>Resume</a>
<a href=/post/>Posts</a>
<a href=/guide/>Guides</a>
<a href=/certificate-authorities/>Certificate Authorities</a></nav><nav class=social><a class=twitter style=--url:url(./twitter.svg) href=https://twitter.com/ajf8729 target=_blank></a>
<a class=github style=--url:url(./github.svg) href=https://github.com/ajf8729 target=_blank></a></nav></header><main class=main><article class=post-single><header class=post-title><p><time>Feb 7, 2022</time></p><h1>Part 04: ConfigMgr - Prerequisites and Site Installation</h1></header><section class=post-content><ol><li>Install Windows features<ul><li><a href=https://github.com/ajf8729/Lab/blob/main/conf/WindowsFeatures.txt>https://github.com/ajf8729/Lab/blob/main/conf/WindowsFeatures.txt</a></li><li><a href=https://raw.githubusercontent.com/ajf8729/Lab/main/conf/WindowsFeatures.txt>https://raw.githubusercontent.com/ajf8729/Lab/main/conf/WindowsFeatures.txt</a></li><li><code>Install-WindowsFeature -Name (Get-Content -Path F:\SOURCE\WindowsFeatures.txt) -Verbose</code></li></ul></li><li>Extend AD schema<ul><li><a href=https://github.com/ajf8729/Lab/blob/main/conf/ConfigMgr_ad_schema.ldf>https://github.com/ajf8729/Lab/blob/main/conf/ConfigMgr_ad_schema.ldf</a></li><li><a href=https://raw.githubusercontent.com/ajf8729/Lab/main/conf/ConfigMgr_ad_schema.ldf>https://raw.githubusercontent.com/ajf8729/Lab/main/conf/ConfigMgr_ad_schema.ldf</a></li><li>Save <code>ConfigMgr_ad_schema.ldf</code> to DC and edit it</li><li>Find/Replace all <code>DC=x</code> with <code>DC=ad,DC=domain,DC=com</code> (substitute your domain DC)</li><li><code>ldifde.exe -i -f ConfigMgr_ad_schema.ldf -v</code></li></ul></li><li>WSUS Postinstall<ul><li><code>"C:\Program Files\Update Services\Tools\WsusUtil.exe" postinstall SQL_INSTANCE_NAME="configmgr.ad.domain.tld" CONTENT_DIR="F:\WSUS"</code> (replace <code>configmgr.ad.domain.tld</code> with the FQDN of you ConfigMgr server)</li></ul></li><li>Install Windows 11 ADK<ul><li><code>adksetup.exe /features OptionId.DeploymentTools OptionId.ImagingAndConfigurationDesigner OptionId.ICDConfigurationDesigner OptionId.UserStateMigrationTool /ceip on /quiet</code></li><li><code>adkwinpesetup.exe /features OptionId.WindowsPreinstallationEnvironment /ceip on /quiet</code></li></ul></li><li>Download updated setup files<ul><li><code>F:\SOURCE\MEM_Configmgr_2103\SMSSETUP\BIN\X64\setupdl.exe" "F:\SOURCE\Downloads"</code></li></ul></li><li>Install ConfigMgr primary site<ul><li><a href=https://github.com/ajf8729/Lab/blob/main/conf/ConfigMgr.ini>https://github.com/ajf8729/Lab/blob/main/conf/ConfigMgr.ini</a></li><li><a href=https://raw.githubusercontent.com/ajf8729/Lab/main/conf/ConfigMgr.ini>https://raw.githubusercontent.com/ajf8729/Lab/main/conf/ConfigMgr.ini</a></li><li>Update fields in ini file as required</li><li><code>F:\SOURCE\MEM_Configmgr_2103\SMSSETUP\BIN\X64\setup.exe /script F:\SOURCE\ConfigMgr.ini</code></li></ul></li><li>Install latest site update(s) (2111 and KB12959506 Hotfix as of 2022-02-07)</li></ol></section><nav class=post-nav><a class=prev href=https://ajf8729.com/guide/03-configmgr-sql-installation-configuration/><span>←</span><span>Part 03: ConfigMgr - SQL Installation and Configuration</span></a>
<a class=next href=https://ajf8729.com/guide/05-configmgr-site-configuration/><span>05 ConfigMgr - Site Configuration</span><span>→</span></a></nav></article></main><footer class=footer><p>&copy; 2022 <a href=https://ajf8729.com/>AJF8729</a></p><p>Powered by <a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>️</p><p><a href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>Paper 5.1</a></p></footer></body></html>