<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=twitter:card content="summary"><meta name=twitter:title content="11 Azure AD - Configuration"><meta name=twitter:image content="https://ajf8729.com/icon.png"><title>11 Azure AD - Configuration - AJF8729</title><meta name=description content="Create domain &ldquo;dev.ajf8729.com in DigitalOcean Configure domain &ldquo;dev.ajf8729.com&rdquo; in Azure AD https://github.com/ajf8729/Lab/blob/main/08-ConfigureAzureADDomain.ps1 Script will wait until DNS TXT record is created Configure LABDC01A for TLS 1.2 https://github.com/ajf8729/Lab/blob/main/09-ConfigureTLS1.2.ps1 Computer will automatically restart after 10 seconds Install Azure AD Connect on LABDC01A (2.0.28.0 as of 2021-11-02) https://www.microsoft.com/download/details.aspx?id=47594 msiexec.exe /i AzureADConnect.msi /qn Disable IE Enhanced Security Mode Set-ItemProperty -Path &#34;HKLM:\SOFTWARE\Microsoft\Active Setup\Installed Components\{A509B1A7-37EF-4b3f-8CFC-4F3A74704073}&#34; -Name &#34;IsInstalled&#34; -Value 0 Initial setup Move AADC related objects to T0 OU Get-ADGroup -Filter &#34;Name -like 'ADSync*'&#34; | Move-ADObject -TargetPath &#34;OU=T0,DC=lab,DC=dev,DC=ajf8729,DC=com&#34; Get-ADUser -Filter &#34;Name -like 'MSOL_*'&#34; | Move-ADObject -TargetPath &#34;OU=T0,DC=lab,DC=dev,DC=ajf8729,DC=com&#34; Get-ADServiceAccount -Filter &#34;Name -like 'ADSync*'&#34; | Move-ADObject -TargetPath &#34;OU=T0,DC=lab,DC=dev,DC=ajf8729,DC=com&#34; Customize synchronization options Configure hybrid join Configure device writeback Enable Seamless SSO https://github."><meta name=author content><link rel="preload stylesheet" as=style href=https://ajf8729.com/app.min.css><link rel=preload as=image href=https://ajf8729.com/theme.png><link rel=preload as=image href=https://ajf8729.com/twitter.svg><link rel=preload as=image href=https://ajf8729.com/github.svg><link rel=icon href=https://ajf8729.com/favicon.ico><link rel=apple-touch-icon href=https://ajf8729.com/apple-touch-icon.png><meta name=generator content="Hugo 0.100.2"><meta property="og:title" content="11 Azure AD - Configuration"><meta property="og:description" content="Create domain &ldquo;dev.ajf8729.com in DigitalOcean Configure domain &ldquo;dev.ajf8729.com&rdquo; in Azure AD https://github.com/ajf8729/Lab/blob/main/08-ConfigureAzureADDomain.ps1 Script will wait until DNS TXT record is created Configure LABDC01A for TLS 1.2 https://github.com/ajf8729/Lab/blob/main/09-ConfigureTLS1.2.ps1 Computer will automatically restart after 10 seconds Install Azure AD Connect on LABDC01A (2.0.28.0 as of 2021-11-02) https://www.microsoft.com/download/details.aspx?id=47594 msiexec.exe /i AzureADConnect.msi /qn Disable IE Enhanced Security Mode Set-ItemProperty -Path &#34;HKLM:\SOFTWARE\Microsoft\Active Setup\Installed Components\{A509B1A7-37EF-4b3f-8CFC-4F3A74704073}&#34; -Name &#34;IsInstalled&#34; -Value 0 Initial setup Move AADC related objects to T0 OU Get-ADGroup -Filter &#34;Name -like 'ADSync*'&#34; | Move-ADObject -TargetPath &#34;OU=T0,DC=lab,DC=dev,DC=ajf8729,DC=com&#34; Get-ADUser -Filter &#34;Name -like 'MSOL_*'&#34; | Move-ADObject -TargetPath &#34;OU=T0,DC=lab,DC=dev,DC=ajf8729,DC=com&#34; Get-ADServiceAccount -Filter &#34;Name -like 'ADSync*'&#34; | Move-ADObject -TargetPath &#34;OU=T0,DC=lab,DC=dev,DC=ajf8729,DC=com&#34; Customize synchronization options Configure hybrid join Configure device writeback Enable Seamless SSO https://github."><meta property="og:type" content="article"><meta property="og:url" content="https://ajf8729.com/guide/11-azure-ad-configuration/"><meta property="article:section" content="guide"><meta itemprop=name content="11 Azure AD - Configuration"><meta itemprop=description content="Create domain &ldquo;dev.ajf8729.com in DigitalOcean Configure domain &ldquo;dev.ajf8729.com&rdquo; in Azure AD https://github.com/ajf8729/Lab/blob/main/08-ConfigureAzureADDomain.ps1 Script will wait until DNS TXT record is created Configure LABDC01A for TLS 1.2 https://github.com/ajf8729/Lab/blob/main/09-ConfigureTLS1.2.ps1 Computer will automatically restart after 10 seconds Install Azure AD Connect on LABDC01A (2.0.28.0 as of 2021-11-02) https://www.microsoft.com/download/details.aspx?id=47594 msiexec.exe /i AzureADConnect.msi /qn Disable IE Enhanced Security Mode Set-ItemProperty -Path &#34;HKLM:\SOFTWARE\Microsoft\Active Setup\Installed Components\{A509B1A7-37EF-4b3f-8CFC-4F3A74704073}&#34; -Name &#34;IsInstalled&#34; -Value 0 Initial setup Move AADC related objects to T0 OU Get-ADGroup -Filter &#34;Name -like 'ADSync*'&#34; | Move-ADObject -TargetPath &#34;OU=T0,DC=lab,DC=dev,DC=ajf8729,DC=com&#34; Get-ADUser -Filter &#34;Name -like 'MSOL_*'&#34; | Move-ADObject -TargetPath &#34;OU=T0,DC=lab,DC=dev,DC=ajf8729,DC=com&#34; Get-ADServiceAccount -Filter &#34;Name -like 'ADSync*'&#34; | Move-ADObject -TargetPath &#34;OU=T0,DC=lab,DC=dev,DC=ajf8729,DC=com&#34; Customize synchronization options Configure hybrid join Configure device writeback Enable Seamless SSO https://github."><meta itemprop=wordCount content="112"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="11 Azure AD - Configuration"><meta name=twitter:description content="Create domain &ldquo;dev.ajf8729.com in DigitalOcean Configure domain &ldquo;dev.ajf8729.com&rdquo; in Azure AD https://github.com/ajf8729/Lab/blob/main/08-ConfigureAzureADDomain.ps1 Script will wait until DNS TXT record is created Configure LABDC01A for TLS 1.2 https://github.com/ajf8729/Lab/blob/main/09-ConfigureTLS1.2.ps1 Computer will automatically restart after 10 seconds Install Azure AD Connect on LABDC01A (2.0.28.0 as of 2021-11-02) https://www.microsoft.com/download/details.aspx?id=47594 msiexec.exe /i AzureADConnect.msi /qn Disable IE Enhanced Security Mode Set-ItemProperty -Path &#34;HKLM:\SOFTWARE\Microsoft\Active Setup\Installed Components\{A509B1A7-37EF-4b3f-8CFC-4F3A74704073}&#34; -Name &#34;IsInstalled&#34; -Value 0 Initial setup Move AADC related objects to T0 OU Get-ADGroup -Filter &#34;Name -like 'ADSync*'&#34; | Move-ADObject -TargetPath &#34;OU=T0,DC=lab,DC=dev,DC=ajf8729,DC=com&#34; Get-ADUser -Filter &#34;Name -like 'MSOL_*'&#34; | Move-ADObject -TargetPath &#34;OU=T0,DC=lab,DC=dev,DC=ajf8729,DC=com&#34; Get-ADServiceAccount -Filter &#34;Name -like 'ADSync*'&#34; | Move-ADObject -TargetPath &#34;OU=T0,DC=lab,DC=dev,DC=ajf8729,DC=com&#34; Customize synchronization options Configure hybrid join Configure device writeback Enable Seamless SSO https://github."></head><body class=not-ready data-menu=true><header class=header><p class=logo><a class=site-name href=https://ajf8729.com/>AJF8729</a><a class=btn-dark></a></p><script>let bodyClx=document.body.classList,btnDark=document.querySelector('.btn-dark'),sysDark=window.matchMedia('(prefers-color-scheme: dark)'),darkVal=localStorage.getItem('dark'),setDark=e=>{bodyClx[e?'add':'remove']('dark'),localStorage.setItem('dark',e?'yes':'no')};setDark(darkVal?darkVal==='yes':sysDark.matches),requestAnimationFrame(()=>bodyClx.remove('not-ready')),btnDark.addEventListener('click',()=>setDark(!bodyClx.contains('dark'))),sysDark.addEventListener('change',e=>setDark(e.matches))</script><nav class=menu><a href=/about/>About</a>
<a href=/resume/>Resume</a>
<a href=/post/>Posts</a>
<a href=/guide/>Guides</a>
<a href=/certificate-authorities/>Certificate Authorities</a></nav><nav class=social><a class=twitter style=--url:url(./twitter.svg) href=https://twitter.com/ajf8729 target=_blank></a>
<a class=github style=--url:url(./github.svg) href=https://github.com/ajf8729 target=_blank></a></nav></header><main class=main><article class=post-single><header class=post-title><p><time>Jan 1, 1</time></p><h1>11 Azure AD - Configuration</h1></header><section class=post-content><ol><li>Create domain &ldquo;dev.ajf8729.com in DigitalOcean</li><li>Configure domain &ldquo;dev.ajf8729.com&rdquo; in Azure AD<ul><li><a href=https://github.com/ajf8729/Lab/blob/main/08-ConfigureAzureADDomain.ps1>https://github.com/ajf8729/Lab/blob/main/08-ConfigureAzureADDomain.ps1</a></li><li>Script will wait until DNS TXT record is created</li></ul></li><li>Configure LABDC01A for TLS 1.2<ul><li><a href=https://github.com/ajf8729/Lab/blob/main/09-ConfigureTLS1.2.ps1>https://github.com/ajf8729/Lab/blob/main/09-ConfigureTLS1.2.ps1</a></li><li>Computer will automatically restart after 10 seconds</li></ul></li><li>Install Azure AD Connect on LABDC01A (2.0.28.0 as of 2021-11-02)<ul><li><a href="https://www.microsoft.com/download/details.aspx?id=47594">https://www.microsoft.com/download/details.aspx?id=47594</a></li><li><code>msiexec.exe /i AzureADConnect.msi /qn</code></li></ul></li><li>Disable IE Enhanced Security Mode<ul><li><code>Set-ItemProperty -Path "HKLM:\SOFTWARE\Microsoft\Active Setup\Installed Components\{A509B1A7-37EF-4b3f-8CFC-4F3A74704073}" -Name "IsInstalled" -Value 0</code></li></ul></li><li>Initial setup<ul><li><img src=/images/aadc-setup-01.png alt="Step 01"></li><li><img src=/images/aadc-setup-02.png alt="Step 02"></li><li><img src=/images/aadc-setup-03.png alt="Step 03"></li><li><img src=/images/aadc-setup-04.png alt="Step 04"></li><li><img src=/images/aadc-setup-05.png alt="Step 05"></li><li><img src=/images/aadc-setup-06.png alt="Step 06"></li></ul></li><li>Move AADC related objects to T0 OU<ul><li><code>Get-ADGroup -Filter "Name -like 'ADSync*'" | Move-ADObject -TargetPath "OU=T0,DC=lab,DC=dev,DC=ajf8729,DC=com"</code></li><li><code>Get-ADUser -Filter "Name -like 'MSOL_*'" | Move-ADObject -TargetPath "OU=T0,DC=lab,DC=dev,DC=ajf8729,DC=com"</code></li><li><code>Get-ADServiceAccount -Filter "Name -like 'ADSync*'" | Move-ADObject -TargetPath "OU=T0,DC=lab,DC=dev,DC=ajf8729,DC=com"</code></li></ul></li><li>Customize synchronization options<ul><li><img src=/images/aadc-config-01.png alt="Step 01"></li><li><img src=/images/aadc-config-02.png alt="Step 02"></li><li><img src=/images/aadc-config-03.png alt="Step 03"></li><li><img src=/images/aadc-config-04.png alt="Step 04"></li><li><img src=/images/aadc-config-05.png alt="Step 05"></li><li><img src=/images/aadc-config-06.png alt="Step 06"></li><li><img src=/images/aadc-config-07.png alt="Step 07"></li></ul></li><li>Configure hybrid join<ul><li><img src=/images/aadc-devopts-01.png alt="Step 01"></li><li><img src=/images/aadc-devopts-02.png alt="Step 02"></li><li><img src=/images/aadc-devopts-03.png alt="Step 03"></li><li><img src=/images/aadc-devopts-04.png alt="Step 04"></li><li><img src=/images/aadc-devopts-05.png alt="Step 05"></li><li><img src=/images/aadc-devopts-06.png alt="Step 06"></li><li><img src=/images/aadc-devopts-07.png alt="Step 07"></li><li><img src=/images/aadc-devopts-08.png alt="Step 08"></li></ul></li><li>Configure device writeback<ul><li><img src=/images/aadc-device-writeback-01.png alt="Step 01"></li><li><img src=/images/aadc-device-writeback-02.png alt="Step 02"></li><li><img src=/images/aadc-device-writeback-03.png alt="Step 03"></li><li><img src=/images/aadc-device-writeback-04.png alt="Step 04"></li></ul></li><li>Enable Seamless SSO<ul><li><img src=/images/aadc-sso-01.png alt="Step 01"></li><li><img src=/images/aadc-sso-02.png alt="Step 02"></li><li><img src=/images/aadc-sso-03.png alt="Step 03"></li><li><img src=/images/aadc-sso-04.png alt="Step 04"></li><li><img src=/images/aadc-sso-05.png alt="Step 05"></li><li><a href=https://github.com/ajf8729/Lab/blob/main/10-EnableSeamlessSSO.ps1>https://github.com/ajf8729/Lab/blob/main/10-EnableSeamlessSSO.ps1</a></li></ul></li></ol></section><nav class=post-nav><a class=prev href=https://ajf8729.com/guide/10-configmgr-misc-roles/><span>←</span><span>10 ConfigMgr - Misc Roles</span></a>
<a class=next href=https://ajf8729.com/guide/12-configmgr-co-management/><span>12 ConfigMgr - Co-management</span><span>→</span></a></nav></article></main><footer class=footer><p>&copy; 2022 <a href=https://ajf8729.com/>AJF8729</a></p><p>Powered by <a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>️</p><p><a href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>Paper 5.1</a></p></footer></body></html>